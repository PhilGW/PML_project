<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Overview</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h4>Overview</h4>

<p>The purpose of this project is to use machine learning to predict how physical exercise is being performed based on data from the exercise.  Participants in the study under consideration were outfitted with a variety of sensors, and then asked to perform an exercise (barbell lifts) in a variety of correct and incorrect ways.  The goal is to predict from a training set what type of lift was performed.  The types of lifts are assigned a letter A through E, and this is the response that the algorithm will be attempting to fit.</p>

<h4>Loading and Splitting the Data</h4>

<p>First, the libraries were loaded, and data were loaded from the working directory:</p>

<pre><code class="r">library(caret); library(randomForest)
fullset &lt;- read.csv(&quot;pml-training.csv&quot;, stringsAsFactors=FALSE, na.strings=c(&quot;&quot;,&quot;#DIV/0!&quot;, &quot;NA&quot; ))
</code></pre>

<pre><code>## Warning in file(file, &quot;rt&quot;): cannot open file &#39;pml-training.csv&#39;: No such
## file or directory
</code></pre>

<pre><code>## Error in file(file, &quot;rt&quot;): cannot open the connection
</code></pre>

<p>Next, the data were divided into a training and test set:</p>

<pre><code class="r">set.seed(4700)
inTrain &lt;- createDataPartition(fullset$classe, p = 0.7, list=FALSE)
trainset &lt;- fullset[inTrain,]
testset &lt;- fullset[-inTrain,]
</code></pre>

<h4>Data Processing</h4>

<p>Much of the data is extraneous, or problematic because of &#39;NA&#39; values.  </p>

<p>The number of columns was reduced by:
1.) Eliminating columns that had nothing to do with the data collected by sensors&hellip;</p>

<pre><code class="r">trset &lt;- trainset[,8:159]
ncol(trset) #Display the # of columns remaining
</code></pre>

<pre><code>## [1] 152
</code></pre>

<p>2.) by using the nearZeroVar() function with default settings to eliminate variables that don&#39;t add much predictive value&hellip;</p>

<pre><code class="r">nzv &lt;- nearZeroVar(trset, saveMetrics=TRUE)
finaltr &lt;- subset(trset,select=(nzv$nzv==FALSE)) #Eliminate columns flagged as poor predictors
ncol(finaltr)  #Display the # of columns remaining
</code></pre>

<pre><code>## [1] 121
</code></pre>

<p>3.) by eliminating all columns that contain NAs.</p>

<pre><code class="r">nalist &lt;- sapply(finaltr, function(n) sum(is.na(n)) )
finaltr &lt;- finaltr[,nalist==0] #Eliminate columns with 1 or more NAs
ncol(finaltr)  #Display the # of columns remaining
</code></pre>

<pre><code>## [1] 52
</code></pre>

<p>The response of interest, &ldquo;classe&rdquo;, was added back to the set as the first column after these other actions were complete.</p>

<pre><code class="r">finaltr &lt;- cbind(trainset$classe, finaltr); names(finaltr)[1] &lt;- &quot;classe&quot;
ncol(finaltr) #Display the # of columns
</code></pre>

<pre><code>## [1] 53
</code></pre>

<p>As can be seen, this takes the original dataset (which has 160 columns) and reduces it to a much more manageable dataset with only 52 predictors plus the outcome of interest.</p>

<h4>Cross-Validation</h4>

<p>The algorithm used was Random Forests, which has a high tendency for overfitting, so cross-validation was used to ensure that the model did not simply fit the noise, and also to gain an estimate of the predictive accuracy.</p>

<pre><code class="r">cvtest &lt;- rfcv(finaltr[,-1], finaltr[,1], cv.fold=6)
plot(cvtest$n.var, cvtest$error.cv, pch=19, log=&quot;x&quot;) #Plot error vs. # of predictors
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-7"/> </p>

<p>As can be seen from the plot of the cross validation results, the general trend is that as the number of predictor variables used by the model increases, the expected error drops off.
The values plotted above can be also be viewed in a table:</p>

<pre><code class="r">data.frame(NumVar=cvtest$n.var, EstimatedErr=cvtest$error.cv)
</code></pre>

<pre><code>##    NumVar EstimatedErr
## 52     52  0.007134018
## 26     26  0.009536289
## 13     13  0.011065007
## 6       6  0.046807891
## 3       3  0.138967751
## 1       1  0.601805343
</code></pre>

<p>As can be seen, the model incorporating all 52 predictors from the dataset has the lowest error rate.  Since processing time is not a major issue, the final model will incorporate all 52 predictors.  Since the error rate as estimated by rfcv() is &lt;0.01, we expect greater than 99% accuracy when we apply the resulting model to the test set.</p>

<h4>Building the model</h4>

<p>The model was built using the randomForest() algorithm, from the randomForest package.  As described above, cross-validation suggested that the best course of action was to incorporate all 52 predictors in the training set.</p>

<pre><code class="r">rffit &lt;- randomForest(finaltr[,-1], as.factor(finaltr$classe) )
</code></pre>

<p>From the cross-validation, it is expected that accuracy will be &gt;99%.
This was tested by using the model to predict the 30% of results that were set aside in the test set:</p>

<pre><code class="r">#Subset to only those 52 best predictors as identified by the training set:
finalte &lt;- testset[, colnames(testset) %in% colnames(finaltr) ]
finalte &lt;- subset(finalte, select= -classe )   #Eliminate the outcome
pred = predict(rffit,newdata=finalte)          #Generate model predictions
confusionMatrix(pred, testset$classe)          #Display result
</code></pre>

<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    A    B    C    D    E
##          A 1674    3    0    0    0
##          B    0 1135    1    0    0
##          C    0    1 1024   11    0
##          D    0    0    1  951    0
##          E    0    0    0    2 1082
## 
## Overall Statistics
##                                          
##                Accuracy : 0.9968         
##                  95% CI : (0.995, 0.9981)
##     No Information Rate : 0.2845         
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16      
##                                          
##                   Kappa : 0.9959         
##  Mcnemar&#39;s Test P-Value : NA             
## 
## Statistics by Class:
## 
##                      Class: A Class: B Class: C Class: D Class: E
## Sensitivity            1.0000   0.9965   0.9981   0.9865   1.0000
## Specificity            0.9993   0.9998   0.9975   0.9998   0.9996
## Pos Pred Value         0.9982   0.9991   0.9884   0.9989   0.9982
## Neg Pred Value         1.0000   0.9992   0.9996   0.9974   1.0000
## Prevalence             0.2845   0.1935   0.1743   0.1638   0.1839
## Detection Rate         0.2845   0.1929   0.1740   0.1616   0.1839
## Detection Prevalence   0.2850   0.1930   0.1760   0.1618   0.1842
## Balanced Accuracy      0.9996   0.9981   0.9978   0.9932   0.9998
</code></pre>

<p>As can be seen from the confusionMatrix() results, accuracy was 99.6% as predicted by the rfcv() cross-validation.  Since the test set was kept separate from the training set from the very beginning, it is expected that the out-of-sample performance would be very similar on other test sets.</p>

<p>Finally, the same model was used to predict the 20 &ldquo;mystery rows&rdquo; from the test set included from the assignment:</p>

<pre><code class="r">test20 &lt;- read.csv(&quot;pml-testing.csv&quot;, stringsAsFactors=FALSE, na.strings=c(&quot;&quot;,&quot;#DIV/0!&quot;, &quot;NA&quot; ))
</code></pre>

<pre><code>## Warning in file(file, &quot;rt&quot;): cannot open file &#39;pml-testing.csv&#39;: No such
## file or directory
</code></pre>

<pre><code>## Error in file(file, &quot;rt&quot;): cannot open the connection
</code></pre>

<pre><code class="r">finaltest20 &lt;- test20[, colnames(test20) %in% colnames(finaltr) ]
pred2 = predict(rffit,newdata=finaltest20)
</code></pre>

<p>Entering these on the course website confirmed that all were correct.</p>

<p>This modeling exercise shows the ease with which random forests can be used to achieve highly accurate predictions on a high-dimensional data set.  Cross-validation helped to ensure that overfitting did not occur; however, if new data were added, it would be important to include a random mixture of the new data in the training set to ensure that the model was not overfitted to the old data.</p>

</body>

</html>
